[SOURCE_URL]: https://user.netmera.com/netmera-developer-guide/integrated-modules/iys-integration
Integrated Modules
IYS Integration
Effective Strategies for Synchronizing, Updating, and Reporting User Permissions via Netmera and IYS
IYS is a critical system introduced in Turkey to help businesses manage consumer preferences regarding commercial electronic messages (e.g., emails, SMS). It ensures compliance with data protection regulations and provides consumers the ability to opt-in or opt-out of receiving commercial communications.
IYS & Netmera Integration Flow
Netmera & IYS Integration
Once you’ve completed your IYS setup, you’ll be able to manage the following scenarios within Netmera:
Initial IYS User Load
: All users will be synchronized with IYS using the initial load feature. This process begins on the night the setup is completed and continues in batches until all users are fully synchronized.
REST API Synchronization
: User data sent via REST API will be updated in IYS in real-time, keeping everything aligned across systems.
Email Uploads
: You can upload your user lists directly into Netmera, which will then synchronize the data with IYS.
Permission Updates
: Any permission changes made within Netmera will automatically synchronize with IYS in real-time, ensuring your user preferences are always up to date.
Nightly Synchronization
: Any permission changes made on IYS will be reviewed and synchronized with the system nightly, ensuring consistent and accurate data.
This integration ensures seamless synchronization between Netmera and IYS, helping you efficiently manage user communication preferences while ensuring full legal compliance.
IYS Configuration
and
Importing Email and SMS Data
(Step 1&2) Diagram
Step 1: IYS Panel Configuration
To integrate IYS with your Netmera account, follow the steps outlined below:
Access the Connectors Page:
Navigate to the
Panel > Connectors.
Choose Data Security / İleti Yönetim Sistemi:
From the available connectors, choose "Data Security" > "İleti Yönetim Sistemi" and click the "Install" button to initiate the integration process.
Configure IYS:
In the provided spaces, input your "
Brand Code
" and "
IYS Code
Access the IYS Panel
: Log in to your
IYS Panel
and verify that the integration setup is successfully completed.
Review and Confirm Configuration
: Ensure that all configurations are correct by cross-checking with the provided
IYS Panel
settings.
For a detailed guide on each configuration step, please refer to the
User Guide
for
IYS Panel documentation
These resources provide step-by-step instructions for configuring both the Netmera and IYS panels correctly.
Step 2: Importing Email and SMS Data into Netmera Panel
To match the data received from IYS with your users in Netmera, you must first ensure that email and SMS data for the users has been processed. There are three ways to import this data into Netmera:
You can import the email and SMS data of your users through the
Update User Methods
for iOS or Android, either via your mobile application or website. For detailed information on how to set this up, please refer to our guide here
Option 2: REST API Transfer
You can also import email and SMS data using the
Add or Update Emails
and
Add or Update MSISDN (Phone Number)
methods via REST API. Here’s how:
Add Emails
To upload or update a list of emails in Netmera, use the
addEmail
method. Here’s an example of how to do it:
curl --location --request POST 'https://restapi.netmera.com/rest/3.0/addEmail' \
--header 'X-netmera-api-key: your_api_key' \
--header 'Content-Type: application/json' \
--data-raw '{
"emailList": [
[email protected]
", "
[email protected]
", "
[email protected]
addEmail Method Reminders
If the email already exists (for example, linked to an ExtID or previously added), a new user will not be created.
New users are only created if the email doesn’t already exist in the system. However, these users won’t have an installation ID, and the ID will not be visible when searching by email or user ID in the
People
section.
Users created with the
addEmail
Add MSISDN (Phone Number) for SMS
To add users with specified MSISDNs (phone numbers) to the Netmera platform, use the
addMsisdn
method. Make sure to include the country code when adding phone numbers.
Mandatory to include the country codes:
When using this service, it is mandatory to include the country code in the phone numbers, i.e., the phone numbers should be in the format of "+90xxxxxxxx".
curl --location --request POST 'https://restapi.netmera.com/rest/3.0/addMsisdn' \
--header 'X-netmera-api-key: your_api_key' \
--header 'Content-Type: application/json' \
--data-raw '{
"msisdnList": [
"+90xxxxxxxx"
Option 3: File Transfer with Email Upload in Netmera Panel
Another option is to upload your email lists directly via the
Netmera Panel
. You can manually upload a file containing your user emails and synchronize them with the system.
Synchronization Details:
After performing these imports, the users will be queried from IYS nightly, and their updated status will be reflected in the Netmera panel. This synchronization will occur on a nightly basis to ensure that the data is always up-to-date.
Step 3: Updating User Permissions in IYS
The following methods allow you to update user permissions and ensure that changes are reflected in the IYS system. These actions are critical for managing opt-ins and opt-outs for SMS and Email communications.
Option 1: Updating User Permissions via REST API (enableMail/disableMail, enableSms/disableSms)
You can update the user’s SMS or email permission status on IYS using the
enableMail
disableMail
enableSms
, and
disableSms
services via REST API.
enableMail
disableMail
enableSMS
disableSMS
To enable email subscriptions for a user, use the
enableMail
service:
curl --location --request POST 'https://restapi.netmera.com/rest/3.0/enableMail' \
--header 'X-netmera-api-key: your_api_key' \
--header 'Content-Type: application/json' \
--data-raw '{
"extIds": [
"your_xid"
To disable email subscriptions for a user, use the
disableMail
service:
curl --location --request POST 'https://restapi.netmera.com/rest/3.0/disableMail' \
--header 'X-netmera-api-key: your_api_key' \
--header 'Content-Type: application/json' \
--data-raw '{
"extIds": [
"your_xid"
To enable SMS subscriptions for a user, use the
enableSMS
service:
curl --location --request POST 'https://restapi.netmera.com/rest/3.0/enableSMS' \
--header 'X-netmera-api-key: your_api_key' \
--header 'Content-Type: application/json' \
--data-raw '{
"extIds": [
"your_xid"
To disable SMS subscriptions for a user, use the
disableSMS
service:
curl --location --request POST 'https://restapi.netmera.com/rest/3.0/disableSMS' \
--header 'X-netmera-api-key: your_api_key' \
--header 'Content-Type: application/json' \
--data-raw '{
"extIds": [
"your_xid"
Option 2: Updating Permissions via Panel
If a user changes their preference in the
Netmera Panel
(under
Targeting > User Detail
), the
Opt-out/Opt-in
button updates the user's permission status, and these changes are automatically reflected in IYS.
To check if a user has allowed email subscriptions and to update their preferences, use the following methods:
Check Subscription Status
Netmera.isAllowedEmailSubscription()
Set Subscription Preference
Netmera.setAllowedEmailSubscription(true)  // Grant email subscription
Netmera.setAllowedEmailSubscription(false) // Revoke email subscription
Java
fun setEmailPermission(isAllowed: Boolean)
public static void setEmailPermission(boolean isAllowed);
Set Email Permission
To set the email permission, use the following method depending on whether email subscriptions are allowed or revoked.
Grant Email Permission
If you want to allow email subscriptions, use the following code:
Java
Netmera.setEmailPermission(true)
Netmera.setEmailPermission(true);
Revoke Email Permission
If you want to revoke email subscriptions, use the following code:
Java
Netmera.setEmailPermission(false)
Netmera.setEmailPermission(false);
Option 4: Users Unsubscribing via Email
When a user unsubscribes from email communications, the system automatically updates the user's subscription status in
IYS
Email Unsubscribe Button:
The
Unsubscribe
button, typically found at the bottom of the email, enables users to directly unsubscribe from email communications. This action is immediately reflected in the IYS system. Below you might see an example of an 'Unsubscribe' button from Netmera emails.
Permission Management Timelines
Changes made to permissions in
Netmera
are immediately transmitted to
IYS
and processed in real-time. All the changes in the examples above will be reflected to your users instantly. However, if a user makes any permission changes directly in the
IYS
panel, this information will be updated in
Netmera
on a nightly basis.
FAQs
What happens when a business integrates with IYS for the first time?
When the IYS integration is completed, the business performs an initial sync to update the permission statuses of all users in IYS.
This sync queries IYS for the current permission status of each user and updates Netmera accordingly.
IYS permission changes are then processed nightly to ensure that any updates made in IYS are reflected in Netmera.
What should you do when a new user registers?
When a user registers on the Netmera platform, their email or phone details are sent to Netmera via the appropriate API endpoint.
Netmera queries IYS to retrieve the current permission status for the added contact details (email or phone).
The permission status is then updated in the Netmera panel to reflect the IYS status.
Which API endpoints should you use?
/addMsisdn
(for phone number)
/addEmail
(for email)
updateUser
(for updating user contact information)
What if a user wants to opt out of communications?
If the user requests permission cancellation (via SMS or email), Netmera communicates the permission update to IYS, indicating that the user has opted out.
The user’s opt-in status is updated in the Netmera panel.
Which API endpoints should you use?
/disableSms
(to revoke SMS permission)
/disableMail
(to revoke email permission)
How does Netmera ensure user permissions are up-to-date?
Netmera automatically queries IYS during the night to retrieve any permission changes made during the day.
The system updates the permission statuses in Netmera.
These updates are reflected in the Netmera panel under
User Detail
User Opt-In
What happens when a user updates their email or phone number?
If a user adds or updates their phone number or email address, Netmera syncs the new information with IYS.
Netmera queries IYS for the permission status of the new contact information.
The updated contact details and permission status are reflected in the business panel.
Which API endpoints should you use?
/addMsisdn
(for new phone number)
/addEmail
(for new email address)
updateUser
(for updating user contact information)
How can you update a user’s permission status directly from the Netmera panel?
To update a user’s permission status (opt-in or opt-out) in real-time, simply change it in the Netmera panel under
Targeting
User Detail
Opt-In
Netmera immediately communicates the updated permission status to IYS.
The updated permission status is reflected in IYS and returned to Netmera for consistency.
How can you bulk update the permission statuses for a group of users?
The business queries IYS for permission changes in bulk, ensuring that the statuses are synchronized across the platform.
Netmera receives these bulk updates from IYS and applies them to the user records in the panel.
The updated statuses are immediately reflected in the Netmera panel, allowing businesses to efficiently manage large groups of users.
What if a user unsubscribes from emails using the unsubscribe link?
When a user clicks the unsubscribe link in an email, the request is processed by Netmera.
Netmera communicates the unsubscribe request to IYS, which updates the user’s email permission status.
The unsubscribe action is reflected in both Netmera and IYS, ensuring that no further marketing emails are sent to the user.
The updated permission status is reflected in the Netmera panel, and the user’s preference is updated in IYS.
Mixpanel
VIA Integration
5 months ago